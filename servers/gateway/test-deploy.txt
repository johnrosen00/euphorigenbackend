//create redis server
docker run -d --name redisServer --network api redis


//build.sh

export GOOS=linux
go clean
go build
docker build -t johnrosen00/euGateway .
go clean

//deploy.sh
docker push johnrosen00/euGateway

ssh -oStrictHostKeyChecking=no root@<azure IP, idk> 'bash -s' < ./deploy-azure.sh

//deploy-azure
docker rm -f euGateway
docker pull johnrosen00/euGateway


//////figure out TLS cert stuff, change up as needed
export TLSKEY=/etc/letsencrypt/live/api.johnrosen.me/privkey.pem
export TLSCERT=/etc/letsencrypt/live/api.johnrosen.me/fullchain.pem


export REDISADDR="redisServer:6379"
export DSN="root:test@tcp(euDB:3306)/store"
export SESSIONKEY="bnottomtext"

docker run -d -p 443:443 --net api -v /etc/letsencrypt:/etc/letsencrypt:ro -e REDISADDR=$REDISADDR -e DSN=$DSN -e SESSIONKEY=$SESSIONKEY -e TLSKEY=$TLSKEY -e TLSCERT=$TLSCERT --name eugateway johnrosen00/eugateway